<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dora-TAS æé™ç«é€Ÿå¼•æ“ V2.0</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        /* æé™ç«é€Ÿé£æ ¼ï¼šå‰¥ç¦»ä¸€åˆ‡æ— æ•ˆè§†è§‰å¹²æ‰° */
        :root {
            --bg-base: #0a0a0c;
            --panel-bg: #141418;
            --text-main: #d1d1d1;
            --text-muted: #666;
            --tas-green: #00ff66;
            --tas-red: #ff3366;
            --tas-gold: #ffcc00;
            --tas-blue: #00ccff;
        }
        * { box-sizing: border-box; font-family: 'Consolas', 'Courier New', monospace; }
        body { background-color: var(--bg-base); color: var(--text-main); margin: 0; padding: 20px; display: flex; justify-content: center; line-height: 1.5; }
        .app-container { width: 100%; max-width: 600px; padding-bottom: 50px; }
        
        /* é¡¶éƒ¨ HUD ä»ªè¡¨ç›˜ */
        .hud-panel {
            background: var(--panel-bg); border: 1px solid #333; border-top: 4px solid var(--tas-green);
            padding: 15px; border-radius: 6px; position: sticky; top: 10px; z-index: 100;
            box-shadow: 0 4px 15px rgba(0,255,102,0.05); margin-bottom: 20px;
        }
        .hud-header { display: flex; justify-content: space-between; font-size: 1.2rem; font-weight: bold; margin-bottom: 10px; color: #fff;}
        .stats-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; }
        .stat-box { background: #000; padding: 10px; border-radius: 4px; border: 1px solid #222; text-align: center; }
        .stat-value { font-size: 1.4rem; font-weight: bold; }
        .val-gold { color: var(--tas-gold); }
        .val-stamina { color: var(--tas-blue); }

        /* ä»»åŠ¡æµçº¿ */
        .timeline { position: relative; padding-left: 20px; border-left: 2px solid #333; margin-left: 10px; }
        .task-item {
            background: var(--panel-bg); margin-bottom: 15px; padding: 12px; border-radius: 4px;
            position: relative; transition: all 0.2s; border: 1px solid transparent;
            display: flex; align-items: flex-start; gap: 10px;
        }
        .task-item::before {
            content: ''; position: absolute; left: -26px; top: 18px; width: 10px; height: 10px;
            border-radius: 50%; background: #333; border: 2px solid var(--bg-base); transition: 0.2s;
        }
        
        /* çŠ¶æ€æœºå˜ä½“ */
        .task-item.active { border-color: var(--tas-blue); box-shadow: 0 0 10px rgba(0,204,255,0.1); }
        .task-item.active::before { background: var(--tas-blue); box-shadow: 0 0 8px var(--tas-blue); }
        .task-item.completed { opacity: 0.5; border-color: #222; }
        .task-item.completed::before { background: var(--tas-green); }
        .task-item.locked { opacity: 0.3; filter: grayscale(1); pointer-events: none; }
        .task-item.is-sl { border-left: 3px solid var(--tas-red); }

        /* å¤é€‰æ¡†é€»è¾‘ */
        .task-check {
            width: 24px; height: 24px; border: 2px solid #555; border-radius: 4px;
            cursor: pointer; display: flex; justify-content: center; align-items: center; flex-shrink: 0;
            margin-top: 2px; transition: 0.2s; background: #000;
        }
        .task-item.completed .task-check { background: var(--tas-green); border-color: var(--tas-green); color: #000; }
        .task-item.completed .task-check::after { content: 'âœ“'; font-weight: bold; }
        
        /* æ–‡æœ¬æ’ç‰ˆ */
        .task-content { flex-grow: 1; }
        .task-time { color: var(--tas-green); font-weight: bold; margin-right: 8px; }
        .task-title { font-size: 1.1rem; color: #fff; }
        .task-meta { font-size: 0.85rem; color: var(--text-muted); margin-top: 6px; display: flex; gap: 10px; flex-wrap: wrap;}
        .badge { padding: 2px 6px; border-radius: 3px; font-size: 0.75rem; color: #000; font-weight: bold; }
        .bg-red { background: var(--tas-red); }
        .bg-gold { background: var(--tas-gold); }
        .bg-blue { background: var(--tas-blue); }

        /* è·¯ç—´å¯¼èˆªç‰¹ä¾› */
        .nav-text { margin-top: 6px; font-size: 0.85rem; color: #ff9f43; background: rgba(255,159,67,0.1); padding: 5px; border-left: 2px solid #ff9f43;}

        /* æ§åˆ¶å° */
        .controls { display: flex; justify-content: space-between; margin-top: 20px; }
        button { background: #222; color: #fff; border: 1px solid #444; padding: 10px 20px; font-family: inherit; cursor: pointer; transition: 0.2s; font-weight: bold;}
        button:hover { background: #333; }
        button:disabled { opacity: 0.3; cursor: not-allowed; }
    </style>
</head>
<body>

<div id="app" class="app-container">
    <div class="hud-panel">
        <div class="hud-header">
            <span>{{ currentDayData.dayName }}</span>
            <span style="font-size: 0.9rem; color: var(--text-muted)">é˜¶æ®µç›®æ ‡: {{ currentDayData.phaseGoal }}</span>
        </div>
        <div class="stats-grid">
            <div class="stat-box">
                <div style="font-size: 0.8rem; color: var(--text-muted)">é¢„è®¡èµ„äº§ (G)</div>
                <div class="stat-value val-gold">{{ currentGold }}</div>
            </div>
            <div class="stat-box">
                <div style="font-size: 0.8rem; color: var(--text-muted)">å½“å‰ä½“åŠ›å€¼</div>
                <div class="stat-value val-stamina">{{ currentStamina }} / 100</div>
            </div>
        </div>
        <div v-if="staminaWarning" style="color: var(--tas-red); font-size: 0.85rem; margin-top: 10px; text-align: center; font-weight:bold; background: rgba(255,51,102,0.1); padding: 5px;">
            âš ï¸ è­¦å‘Šï¼šä½“åŠ›æåº¦å±é™©ï¼Œç¦æ­¢æŒ¥èˆå·¥å…·ï¼
        </div>
    </div>

    <div class="timeline">
        <div 
            v-for="(task, index) in currentDayData.tasks" 
            :key="task.id"
            class="task-item"
            :class="{ 
                'completed': task.status === 'done', 
                'active': task.status === 'active',
                'locked': task.status === 'locked',
                'is-sl': task.isSL 
            }"
        >
            <div class="task-check" @click="executeTask(index)"></div>
            <div class="task-content">
                <div>
                    <span class="task-time">{{ task.time }}</span>
                    <span class="task-title">{{ task.title }}</span>
                </div>
                
                <div class="task-meta">
                    <span v-if="task.isSL" class="badge bg-red">å¼ºåˆ¶ S/L</span>
                    <span v-if="task.goldDiff" class="badge bg-gold">{{ task.goldDiff > 0 ? '+' : ''}}{{ task.goldDiff }} G</span>
                    <span v-if="task.stamDiff" class="badge bg-blue">{{ task.stamDiff > 0 ? '+' : ''}}{{ task.stamDiff }} ä½“åŠ›</span>
                </div>
                
                <div v-if="task.note" style="margin-top: 6px; font-size: 0.9rem; color: #aaa;">
                    â¤ {{ task.note }}
                </div>
                <div v-if="task.nav" class="nav-text">
                    ğŸ“ <b>å¯¼èˆª:</b> {{ task.nav }}
                </div>
            </div>
        </div>
    </div>

    <div class="controls">
        <button @click="prevDay" :disabled="dayIndex === 0">â—€ æ’¤å›</button>
        <button @click="resetDay" style="color: var(--tas-red); border-color: var(--tas-red);">â†» é‡ç½®æœ¬æ—¥</button>
        <button @click="nextDay" :disabled="dayIndex === db.length - 1" style="color: var(--tas-green); border-color: var(--tas-green);">ç»“ç®—æ­¤æ—¥ â–¶</button>
    </div>
</div>

<script>
    const { createApp } = Vue;

    // ==========================================
    // ç«é€Ÿå‰§æœ¬æ•°æ®åº“ (Spring Day 1 - 10)
    // ä¸“é—¨é’ˆå¯¹: ç‹‚æš´æŒ–çŸ¿ + æ”¾å¼ƒé’“é±¼/åšé¥­ + ç‹‚èˆ”å¥³æ€§NPC
    // ==========================================
    const speedrunDB = [
        {
            dayName: "Spring 01 (å¼ºåˆ¶è¿‡åœºæ—¥)",
            phaseGoal: "æ— æƒ…æŒ‰Aè·³å‰§æƒ…ï¼Œç§¯æ”’åˆå§‹æˆ˜ç•¥ç‰©èµ„",
            baseGold: 0,
            baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "è·³è¿‡æ•™ç¨‹å‰§æƒ…", note: "ç‹‚æŒ‰Aé”®è·³è¿‡ï¼Œä¸è¦çœ‹å­—ã€‚", stamDiff: 0, goldDiff: 0 },
                { id: 2, time: "13:00", title: "æ‹”è‰ä¸æ¡çŸ³å¤´", note: "æ¸…ç†ç‰§åœºã€‚æ‚è‰å’ŒçŸ³å¤´æ˜¯åˆæœŸçš„é€ç¤¼ç¥å™¨ï¼Œç»å¯¹ä¸è®¸å–ï¼æ”¾å…¥å±‹å†…æ”¶çº³ç®±ã€‚", stamDiff: -20, goldDiff: 0 },
                { id: 3, time: "18:00", title: "ç«‹åˆ»ç¡è§‰å­˜æ¡£", stamDiff: 20, goldDiff: 0 }
            ]
        },
        {
            dayName: "Spring 02 (å…¨é•‡ç­¾åˆ°ä¸åŸºå»º)",
            phaseGoal: "é›¶å¤±è¯¯è·‘å›¾ï¼Œæ‹¿å…¨æ‰€æœ‰å·¥å…·",
            baseGold: 0, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "å‡ºé—¨æ‹¿ç§å­", note: "é•‡é•¿å¼ºåˆ¶ç»™èŠœèç§å­", stamDiff: 0, goldDiff: 0 },
                { id: 2, time: "08:00", title: "ã€è·¯çº¿Aã€‘æ‚è´§åº—æ‰¾æ°ç›", nav: "ç‰§åœºå‘å³ -> è¿‡çŸ³æ¡¥ -> è¿›é•‡å­å‘å³ -> ä¸Šå°é˜¶ç¬¬ä¸€å®¶åº—", note: "æ‹¿ç§å­ï¼Œé¡ºæ‰‹é€å¥¹ä¸€æœµè·¯è¾¹æ¡çš„èŠ±", stamDiff: 0, goldDiff: 0 },
                { id: 3, time: "09:00", title: "ã€è·¯çº¿Bã€‘æ‰“é“åº—æ‹¿é•å­", nav: "å‡ºæ‚è´§åº— -> å¾€å³ä¸‹èµ° -> æœ‰é“ç §æ‹›ç‰Œ", note: "æ‹¿åˆ°åå­—é•ï¼Œç«é€Ÿå…³é”®ï¼", stamDiff: 0, goldDiff: 0 },
                { id: 4, time: "09:30", title: "ã€è·¯çº¿Cã€‘åŒ»é™¢æ‰¾æŠ¤å£«å¡é›·å¨œ", nav: "æ‰“é“åº—å¾€å·¦ä¸‹ -> ç™½è‰²åå­—æ¶å»ºç­‘", note: "è¿›é—¨è§¦å‘å‰§æƒ…ï¼Œé€å¥¹è·¯è¾¹çš„æ‚è‰/èŠ±ã€‚", stamDiff: 0, goldDiff: 0 },
                { id: 5, time: "10:00", title: "ã€è·¯çº¿Dã€‘é¥­åº—æ‰¾è–‡æ‹‰", nav: "åŒ»é™¢å³è¾¹ -> çº¢ç –å»ºç­‘", note: "è¿›é—¨æ‰“æ‹›å‘¼ï¼Œä¸ç”¨ä¹°ä¸œè¥¿ï¼Œæ²¡é’±ã€‚", stamDiff: 0, goldDiff: 0 },
                { id: 6, time: "11:00", title: "ã€è·¯çº¿Eã€‘æœ¨å·¥å±‹æ‰¾æ½˜ç‰¹", nav: "åŸè·¯è·‘å›ç‰§åœº -> å¾€å·¦èµ°è¿›å…¥å“—å•¦æ²³ -> å¾€ä¸Šçœ‹åˆ°ç²‰è‰²å¤§æ ‘æ ¹è¿›å±‹", note: "è¿™æ˜¯æœ€è¿œçš„ç‚¹ï¼Œè·‘å®Œå°±å…¨è§£é”äº†", stamDiff: 0, goldDiff: 0 },
                { id: 7, time: "14:00", title: "å›ç‰§åœºç§åœ°", note: "å¼€å¦3x3çš„æ ¼å­ï¼Œç§ä¸‹èŠœèï¼Œæµ‡æ°´ã€‚", stamDiff: -20, goldDiff: 0 },
                { id: 8, time: "16:00", title: "ç¡è§‰", stamDiff: 20, goldDiff: 0 }
            ]
        },
        {
            dayName: "Spring 03 (è¡€æ±—çŸ¿å·¥æ—¥)",
            phaseGoal: "S/L æŒ–æ˜ç¬¬ä¸€æ¡¶é‡‘",
            baseGold: 0, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "æµ‡æ°´å¹¶æ¡ç ´çƒ‚", note: "æµ‡å®Œæ°´å»åå±±æ¡å‡ ä¸ªç«¹ç¬‹æˆ–æ¢…å­ï¼ˆå›ä½“åŠ›ç”¨ï¼‰", stamDiff: -10, goldDiff: 0 },
                { id: 2, time: "10:00", title: "å‰å¾€çŸ¿æ´", nav: "ç‰§åœºå‘å·¦ -> å“—å•¦æ²³ -> ç²‰è‰²æ ‘æ ¹å·¦ä¸Šè§’çš„é»‘æ´å£", stamDiff: 0, goldDiff: 0 },
                { id: 3, time: "10:30", title: "æ·±æ½œåœ°ä¸‹ 3 å±‚", isSL: true, note: "æ¯å±‚è¿›é—¨å­˜æ¡£ -> æ‰¾æ¥¼æ¢¯ -> è¯»æ¡£ç›´æ¥æŒ–ã€‚ä¿æŒ0æ— æ•ˆè€—ä½“ã€‚", stamDiff: -10, goldDiff: 0 },
                { id: 4, time: "13:00", title: "æŒ–å‡ºåŒ–çŸ³/ç¥ç€", isSL: true, note: "åœ¨åœ°ä¸‹3å±‚ç–¯ç‹‚S/Lï¼Œæ²¡æŒ–å‡ºä»·å€¼3000Gä»¥ä¸Šçš„åŒ–çŸ³ç»ä¸ç¦»å¼€ï¼", stamDiff: -20, goldDiff: 3000 },
                { id: 5, time: "18:00", title: "æé€Ÿå‡ºè´§", note: "æŠŠåŒ–çŸ³æ‰”è¿›çº¢ç®±å­ï¼Œé“œçŸ¿çŸ³ä¿ç•™åƒä¸‡åˆ«å–ã€‚", stamDiff: 0, goldDiff: 0 }
            ]
        },
        {
            dayName: "Spring 04 (èµ„æœ¬å˜ç°æ—¥)",
            phaseGoal: "è´­ä¹°å¤§èƒŒåŒ…ï¼Œè§£é™¤æ§½ä½é™åˆ¶",
            baseGold: 3000, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "æ—¥å¸¸æµ‡æ°´", stamDiff: -10, goldDiff: 0 },
                { id: 2, time: "08:00", title: "æ‚è´§åº—æ‰«è´§", nav: "å»é•‡ä¸Šæ‚è´§åº—", note: "è´­ä¹°å¤§èƒŒåŒ…ï¼è´­ä¹°1åŒ…é«˜çº§è‚¥æ–™ï¼", stamDiff: 0, goldDiff: -3000 },
                { id: 3, time: "09:00", title: "ç§ä¸‹å† å†›ä½œç‰©", note: "å•ç§ä¸€é¢—èŠœèï¼Œæ’’ä¸Šåˆšä¹°çš„é«˜çº§è‚¥æ–™ï¼Œæ¯å¤©æ–½è‚¥ï¼Œä¸º28æ—¥æ¯”èµ›åšå‡†å¤‡ã€‚", stamDiff: -5, goldDiff: 0 },
                { id: 4, time: "10:00", title: "è¿›åŸé€ç¤¼", note: "é€å¸‚é•¿èŠœèï¼Œé€æŠ¤å£«å¡é›·å¨œèŠ±è‰ï¼Œé€é™é¦™èŠ±ã€‚", stamDiff: 0, goldDiff: 0 },
                { id: 5, time: "13:00", title: "é‡è¿”çŸ¿æ´", note: "éšä¾¿æŒ–ç‚¹é“œçŸ¿çŸ³ï¼Œä¸è¦å¤ªè‚ï¼Œä¿æŒä½“åŠ›", stamDiff: -40, goldDiff: 1000 }
            ]
        },
        {
            dayName: "Spring 05 (å…³é”®é“å…·è§£é”æˆ˜)",
            phaseGoal: "å¿…é¡»æŒ–åˆ°é‡‘çŸ¿çŸ³ï¼Œä¸ºä»»æ„é—¨åšå‡†å¤‡",
            baseGold: 1000, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "æµ‡æ°´æ–½è‚¥", note: "åˆ«å¿˜äº†å† å†›èŠœè", stamDiff: -10, goldDiff: 0 },
                { id: 2, time: "09:00", title: "ä¸‹çŸ¿æ·±å±‚", note: "ä»Šå¤©å¿…é¡»ä¸‹åˆ°åœ°ä¸‹ 4-5 å±‚ä»¥ä¸Š", stamDiff: -20, goldDiff: 0, isSL: true },
                { id: 3, time: "14:00", title: "æŒ–å–é‡‘çŸ¿çŸ³", note: "S/L æŒ–é‡‘çŸ¿ï¼åªè¦æŒ–åˆ°ä¸€ä¸ªï¼Œç«‹åˆ»æ”¶æ‰‹ï¼Œè¿™æ˜¯è§£é”ç¥å™¨çš„é’¥åŒ™ã€‚", stamDiff: -30, goldDiff: 0, isSL: true },
                { id: 4, time: "18:00", title: "æŒ–å–åŒ–çŸ³å˜ç°", stamDiff: -20, goldDiff: 4000 }
            ]
        },
        {
            dayName: "Spring 06 (å·¥æ¬²å–„å…¶äº‹)",
            phaseGoal: "åå­—é•å‡çº§é“œçº§",
            baseGold: 5000, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "æµ‡æ°´æ–½è‚¥", stamDiff: -10, goldDiff: 0 },
                { id: 2, time: "10:00", title: "é“åŒ é“ºå‡çº§å·¥å…·", nav: "æ‰“é“åº—", note: "å¸¦ç€é“œçŸ¿çŸ³å’Œé’±ï¼ŒæŠŠåå­—é•å‡çº§ä¸ºé“œé•ã€‚æ¥ä¸‹æ¥å‡ å¤©ä¸èƒ½æŒ–çŸ¿äº†ã€‚", stamDiff: 0, goldDiff: -1500 },
                { id: 3, time: "11:00", title: "ç¤¾äº¤ç–¯ç‹‚é€ç¤¼", note: "æ‹¿ç€è·¯è¾¹çš„é‡æœã€é²œèŠ±ï¼ŒæŒ‰é¡ºåºé€ï¼šé™é¦™ -> æŠ¤å£« -> æ°ç› -> è–‡æ‹‰ -> å¸‚é•¿", stamDiff: -10, goldDiff: 0 },
                { id: 4, time: "16:00", title: "ç æ ‘æ•²çŸ³å¤´", note: "ç”¨å‰©ä½™çš„ä½“åŠ›åœ¨ç‰§åœºå›¤ç§¯ç‚¹è½¯æœ¨å’Œæ™®é€šçŸ³æ", stamDiff: -50, goldDiff: 0 }
            ]
        },
        {
            dayName: "Spring 07 (ä¿®æ•´ä¸å¸ƒå±€)",
            phaseGoal: "åˆ©ç”¨å·¥å…·çœŸç©ºæœŸåˆ·å¥½æ„Ÿ",
            baseGold: 3500, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "æµ‡æ°´æ–½è‚¥", stamDiff: -10, goldDiff: 0 },
                { id: 2, time: "10:00", title: "åŒ»é™¢ä¹°è¯", nav: "å»åŒ»é™¢æ‰¾åŒ»ç”Ÿ", note: "å¤§é‡è´­ä¹°ç²¾åŠ›é¥®æ–™ï¼ˆæ¯ç“¶200Gï¼‰ï¼Œä¸ºæ˜å¤©æ‹¿å›é•å­åçš„çˆ†è‚åšå‡†å¤‡ã€‚é¡ºä¾¿é€æŠ¤å£«ç¤¼ã€‚", stamDiff: 0, goldDiff: -2000 },
                { id: 3, time: "12:00", title: "é™é¦™è·Ÿè¸ªç‹‚", nav: "å¤§åœ°å›¾å¯»æ‰¾é™é¦™å›¾æ ‡", note: "å¤šä¸é™é¦™å¯¹è¯ï¼Œè¿™å‡ å¤©é›†ä¸­å†²å¥¹çš„å¥½æ„Ÿã€‚", stamDiff: 0, goldDiff: 0 },
                { id: 4, time: "15:00", title: "æ¡ç ´çƒ‚", nav: "å…¨å›¾æ‰«è¡", note: "æ¸…ç†åœ°å›¾ä¸Šæ‰€æœ‰èƒ½æ¡çš„ç«¹ç¬‹ã€æ¢…å­ï¼Œç•™ä½œåƒæˆ–é€ç¤¼ã€‚", stamDiff: -10, goldDiff: 0 }
            ]
        },
        {
            dayName: "Spring 08 (é‡è¿”è£è€€)",
            phaseGoal: "å–å›é“œé•ï¼ŒæŒ–çŸ¿æ•ˆç‡ç¿»å€",
            baseGold: 1500, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "æµ‡æ°´æ–½è‚¥", stamDiff: -10, goldDiff: 0 },
                { id: 2, time: "09:00", title: "å–å›é“œé•", nav: "é“åŒ é“º", note: "å»æ‰“é“åº—æ‹¿åˆ°é“œåå­—é•ï¼Œä»æ­¤æŒ–æ™®é€šçš„çŸ³å¤´åªè¦ä¸€ä¸‹ï¼", stamDiff: 0, goldDiff: 0 },
                { id: 3, time: "10:00", title: "å¸¦ç€é‡‘çŸ¿çŸ³æ‰¾å¸‚é•¿", nav: "é•‡ä¸œé‡‘è‰²å¤§æˆ¿å­", note: "æŠŠåŒ…é‡Œçš„é‡‘çŸ¿çŸ³å¸¦ä¸Šï¼Œè§¦å‘ä»»æ„é—¨å‰§æƒ…ï¼ˆå¦‚æœå¥½æ„Ÿåº¦å·²åˆ°ï¼‰ã€‚æœªè§¦å‘åˆ™ç»§ç»­é€ä»–èŠœèã€‚", stamDiff: 0, goldDiff: 0 },
                { id: 4, time: "12:00", title: "æ— é™ä¸‹çŸ¿æµ", note: "å¸¦ç€æ˜¨å¤©ä¹°çš„è¯ï¼Œç›´æ¥æ€ç©¿çŸ¿æ´ï¼Œç›®æ ‡ 8000Gã€‚", stamDiff: -80, goldDiff: 8000 }
            ]
        },
        {
            dayName: "Spring 09 (èŠœèå¤§ä¸°æ”¶)",
            phaseGoal: "ç¬¬ä¸€æ³¢ä½œç‰©å˜ç°",
            baseGold: 9500, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "æ”¶å‰²é™¤æ¯”èµ›å¤–æ‰€æœ‰èŠœè", note: "ä¿ç•™é‚£é¢—æ¯å¤©æ–½è‚¥çš„ï¼å…¶ä»–çš„å…¨æ‹”äº†æ‰”è¿›å‡ºè´§ç®±ã€‚", stamDiff: -20, goldDiff: 1500 },
                { id: 2, time: "08:00", title: "æ‚è´§åº—ä¹°è¡¥ç»™", note: "ä¹°æ–°çš„èŠœèç§å­ç§ä¸‹ã€‚", stamDiff: 0, goldDiff: -500 },
                { id: 3, time: "10:00", title: "æ¯æ—¥å¥³æ€§é€ç¤¼å¾ªç¯", note: "æŠ¤å£«(èŠ±) -> é™é¦™(èŠ±) -> è–‡æ‹‰(èŠ±)", stamDiff: 0, goldDiff: 0 },
                { id: 4, time: "13:00", title: "ç»§ç»­æŒ–çŸ¿", stamDiff: -60, goldDiff: 3000 }
            ]
        },
        {
            dayName: "Spring 10 (ç¥é€Ÿä»»æ„é—¨)",
            phaseGoal: "æ‹¿åˆ°ä»»æ„é—¨ï¼Œåœ°å›¾ç§»åŠ¨æ—¶é—´å½»åº•æ¸…é›¶",
            baseGold: 13500, baseStamina: 100,
            tasks: [
                { id: 1, time: "06:00", title: "æµ‡æ°´æ–½è‚¥", stamDiff: -10, goldDiff: 0 },
                { id: 2, time: "09:00", title: "å¸‚é•¿å®¶æè´§", nav: "å¸‚é•¿å®¶", note: "å¦‚æœå‰å‡ å¤©è§¦å‘äº†å‰§æƒ…ï¼Œä»Šå¤©å†å»ä¸€æ¬¡ï¼Œé•‡é•¿ä¼šç»™ä½ ã€ä»»æ„é—¨ã€‘ï¼", stamDiff: 0, goldDiff: 0 },
                { id: 3, time: "09:30", title: "ä»»æ„é—¨è¯•é©¾é€ç¤¼", note: "æŒ‰L/Rç›´æ¥é£ï¼ç¬é—´è·‘å®Œ4ä¸ªå¦¹å­é€èŠ±ï¼èŠ‚çœç°å®æ—¶é—´5åˆ†é’Ÿã€‚", stamDiff: 0, goldDiff: 0 },
                { id: 4, time: "11:00", title: "ç¬é—´ç§»åŠ¨ä¸‹çŸ¿", note: "ç›´æ¥é£åˆ°å“—å•¦æ²³ï¼Œä¸‹çŸ¿ï¼Œä»Šå¤©ç›®æ ‡çªç ´ä¸‡å…ƒã€‚", stamDiff: -70, goldDiff: 5000 }
            ]
        }
    ];

    createApp({
        data() {
            return {
                dayIndex: 0,
                db: speedrunDB,
                goldSnapshot: [0] // è®°å½•æ¯å¤©å¼€å§‹æ—¶çš„çœŸå®èµ„é‡‘å¿«ç…§ï¼Œå®ç°å®Œç¾çš„æ—¶ç©ºå›æº¯
            }
        },
        computed: {
            currentDayData() {
                let day = JSON.parse(JSON.stringify(this.db[this.dayIndex]));
                let isLocked = false;
                
                day.tasks.forEach((task, idx) => {
                    if (!task.status) {
                        if (isLocked) {
                            task.status = 'locked';
                        } else if (idx === 0 || day.tasks[idx-1].status === 'done') {
                            task.status = 'active';
                        } else {
                            task.status = 'locked';
                        }
                    }
                    if (task.status !== 'done') isLocked = true;
                });
                return day;
            },
            currentGold() {
                // ä¸¥è°¨çš„èµ„é‡‘æµè®¡ç®—æ¨¡å‹
                let base = this.goldSnapshot[this.dayIndex];
                let diff = 0;
                this.db[this.dayIndex].tasks.forEach(t => {
                    if (t.status === 'done' && t.goldDiff) diff += t.goldDiff;
                });
                return base + diff;
            },
            currentStamina() {
                let stam = 100;
                this.db[this.dayIndex].tasks.forEach(t => {
                    if (t.status === 'done' && t.stamDiff) stam += t.stamDiff;
                });
                return stam > 100 ? 100 : stam;
            },
            staminaWarning() {
                return this.currentStamina <= 15;
            }
        },
        methods: {
            executeTask(index) {
                const task = this.currentDayData.tasks[index];
                if (task.status === 'locked') return;

                if (task.isSL && task.status !== 'done') {
                    if(!confirm("ğŸ”¥ å¼ºåˆ¶èŠ‚ç‚¹é˜²å‘†éªŒè¯ï¼š\nä½ ç¡®å®šå·²ç»åœ¨æ¸¸æˆå†…é€šè¿‡ S/L è¾¾æˆäº†è¯¥ç›®æ ‡ï¼Ÿæ²¡æ‹¿åˆ°ä¸è¦ç‚¹ç¡®å®šï¼")) return;
                }

                const realTask = this.db[this.dayIndex].tasks[index];
                if (realTask.status === 'done') {
                    for(let i = index; i < this.db[this.dayIndex].tasks.length; i++) {
                        delete this.db[this.dayIndex].tasks[i].status;
                    }
                } else {
                    realTask.status = 'done';
                }
            },
            nextDay() {
                if (this.dayIndex < this.db.length - 1) {
                    // ç»“ç®—å¹¶å°†å½“å‰é‡‘å¸å¿«ç…§å­˜å…¥ä¸‹ä¸€å¤©
                    this.goldSnapshot[this.dayIndex + 1] = this.currentGold;
                    this.dayIndex++;
                    window.scrollTo(0, 0);
                } else {
                    alert("ğŸ† å‰ 10 å¤©æé™è¯•ç‚¼å®Œæˆï¼ä½ çš„é¢„ä¼°èµ„äº§å·²è¾¾ " + this.currentGold + " Gï¼");
                }
            },
            prevDay() {
                if (this.dayIndex > 0) {
                    this.dayIndex--;
                    window.scrollTo(0, 0);
                }
            },
            resetDay() {
                if(confirm("å°†æ¸…é™¤ä»Šå¤©çš„æ‰€æœ‰æ‰“å‹¾è®°å½•ï¼Œç¡®å®šå—ï¼Ÿ")) {
                    this.db[this.dayIndex].tasks.forEach(t => delete t.status);
                }
            }
        }
    }).mount('#app');
</script>
</body>
</html>
